---
title: "03 PCA"
author: "Ryan Peek"
date: "*Updated: `r format(Sys.Date())`*"
output: 
  html_document:
    keep_md: true
    toc: yes
    toc_float: yes
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(here)
```

## Plot PCA

Following scripts 01 and 02, use 03 to plot PCA's interactively or statically.

Below is just an example.

```{r pcaALL, message=FALSE, warning=FALSE}

# source the function to plot
source(paste0(here(),"/scripts/functions/f_read_covar.R"))

# load the metadata
metadat <- read_csv(file = paste0(here(), "/data/rapture_metadata_rabo.csv"))

# set site/reads for bamlist/covar filepaths:
reads <- "25k"
site <- "all_rabo"
covarpath<- paste0(here(), "/data_output/pca/", site, "_", reads,".covMat")
bampath <- paste0(here(), "/data_output/bamlists/", site, "_", reads, "_thresh.bamlist")

# run function
(read_covar(covarpath, bampath, metadat, c(2,3),plotlyplot = TRUE))

```
